import json

def filter_template(input_file, output_file):
    filtered_data = []
    
    # 逐行读取 JSONL 文件
    with open(input_file, 'r', encoding='utf-8') as f:
        for line in f:
            try:
                item = json.loads(line)  # 解析每一行的 JSON 数据
                # 筛选出 image_path 包含 '11234' 或 '18310' 的条目
                if '11234' in item.get('image_path', '') or '18310' in item.get('image_path', ''):
                    filtered_data.append(item)
            except json.JSONDecodeError:
                print(f"Skipping invalid JSON line: {line}")
    
    # 将筛选后的数据写入输出文件
    with open(output_file, 'w', encoding='utf-8') as f:
        for item in filtered_data:
            json.dump(item, f, ensure_ascii=False)
            f.write('\n')  # 每个 JSON 对象后加换行符

# 示例用法
filter_template(input_file='/opt/nas/p/dongshaokang/AgentCPM-GUI/eval/eval_results/V1/CPT630/android_control_low_test_v1/all_copy.jsonl', 
                output_file='/opt/nas/p/dongshaokang/AgentCPM-GUI/eval/eval_results/V1/CPT630/android_control_low_test_v1/all_copy2.jsonl')
